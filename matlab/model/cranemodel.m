%==============================================================================
% AAUCrane Models (Mx, My, X, Y, W)
%==============================================================================
clear all; close all;
s = tf('s');

%------------------------------------------------------------------------------
% GLOBALS
%------------------------------------------------------------------------------
mt = 0.3; % Kan ikke vejes / el. findes i dokumentation
mm = 0.8; % Magnet + krog
mp = 2.866 + mm;
l  = 0.65;
g  = 9.82;

%------------------------------------------------------------------------------
% Mx(s): Motor X (Uin,x [V] -> Omega [rad/s])
%------------------------------------------------------------------------------
Mx.b = 0.0018;
Mx.I = 0.0012;
 %Mx.b = 0.0015;
 %Mx.I = 0.0011;
 
Mx.kt = 0.03;
Mx.ra = 0.43;

Mx = (Mx.kt/Mx.ra)/(Mx.kt^2/Mx.ra + Mx.b + Mx.I*s);

%------------------------------------------------------------------------------
% X(s): X pos (Omega [rad/s] -> X [m])
%------------------------------------------------------------------------------

Grx = 7/144;
rrx = 0.08;
gear = Grx*rrx;
X = Mx * gear * 1/s;

%------------------------------------------------------------------------------
% W(s): Wire (X [m] -> Phi [rad])
%------------------------------------------------------------------------------
W.b = -0.00548;
W.I = -0.0909;

W = (-mp*l*s^2)/((W.I + mp*l^2)*s^2 - W.b*s + mp*g*l);

%------------------------------------------------------------------------------
% My(s): Motor Y (Uin,y [V] -> Omega [rad/s])
%------------------------------------------------------------------------------
My.b = 0.0218;
My.I = 0.0078;

My.kt = 0.03;
My.ra = 0.43;

My = (My.kt/My.ra)/(My.kt^2/My.ra + My.b + My.I*s);

%------------------------------------------------------------------------------
% Y(s): Y pos (Omega [rad/s] -> Y [m])
%------------------------------------------------------------------------------
Gry = 1/24;
rry = 0.05;

Y = My * Gry * rry * 1/2 * 1/s;