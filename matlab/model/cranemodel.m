%==============================================================================
% AAUCrane Models (Mx, My, X, Y, W)
%==============================================================================
clear all; close all;
s = tf('s');

%------------------------------------------------------------------------------
% GLOBALS
%------------------------------------------------------------------------------
% Magnet + krog
mm = 0.8;
% Container + magnet + krog (Hele 'pendul' massen)
mp = 2.866 + mm;
% Længde af wire
l  = 0.65;
% Tyngdekraften
g  = 9.82;
% Tyngdekraften
kt = 0.03;
% Motor modstand
ra = 0.43;

%------------------------------------------------------------------------------
% MED CONTAINER
% Mx(s): Motor X (Uin,x [V] -> Omega [rad/s])
%------------------------------------------------------------------------------
Mxmb = 0.0018;
MxmI = 0.0012;

Mxm = (kt/ra)/(kt^2/ra + Mxmb + MxmI*s);
%------------------------------------------------------------------------------
% MED CONTAINER
% X(s): X pos (Omega [rad/s] -> X [m])
%------------------------------------------------------------------------------
Grx = 7/144;
rrx = 0.08;
gearx = Grx*rrx;

Xm = Mxm * gearx * 1/s;
%------------------------------------------------------------------------------
% MED CONTAINER
% W(s): Wire (X [m] -> Phi [rad])
%------------------------------------------------------------------------------
Wmb = 0.0315;
WmI = 0.0890;

Wm = (-mp*l*s^2)/((mp*l^2 - WmI)*s^2 + Wmb*s + mp*g*l);
%------------------------------------------------------------------------------
% UDEN CONTAINER
% Mx(s): Motor X (Uin,x [V] -> Omega [rad/s])
%------------------------------------------------------------------------------
Mxub = 0.0015;
MxuI = 0.0011;

Mxu = (kt/ra)/(kt^2/ra + Mxub + MxuI*s);
%------------------------------------------------------------------------------
% UDEN CONTAINER
% X(s): X pos (Omega [rad/s] -> X [m])
%------------------------------------------------------------------------------
Grx = 7/144;
rrx = 0.08;
gearx = Grx*rrx;

Xu = Mxu * gearx * 1/s;
%------------------------------------------------------------------------------
% UDEN CONTAINER
% W(s): Wire (X [m] -> Phi [rad])
%------------------------------------------------------------------------------
Wub = 0.0136;
WuI = 0.0423;

Wu = (-mm*l*s^2)/((mm*l^2 - WuI)*s^2 + Wub*s + mm*g*l);
%------------------------------------------------------------------------------
% UPWARDS MOVEMENT
% My(s): Motor Y (Uin,y [V] -> Omega [rad/s])
%------------------------------------------------------------------------------
Myub = 0.0322;
MyuI = 0.0090;

Myu = (kt/ra)/(kt^2/ra + Myub + MyuI*s);
%------------------------------------------------------------------------------
% Y(s): Y pos (Omega [rad/s] -> Y [m])
%------------------------------------------------------------------------------
Gry = 1/24;
rry = 0.05;
geary = Gry*rry*(1/2);

Yu = Myu * geary * (1/s);
%------------------------------------------------------------------------------
% DOWNWARDS MOVEMENT
% My(s): Motor Y (Uin,y [V] -> Omega [rad/s])
%------------------------------------------------------------------------------
Mydb = 0.0115;
MydI = 0.0067;

Myd = (kt/ra)/(kt^2/ra + Mydb + MydI*s);
%------------------------------------------------------------------------------
% Y(s): Y pos (Omega [rad/s] -> Y [m])
%------------------------------------------------------------------------------
Gry = 1/24;
rry = 0.05;
geary = Gry*rry*(1/2);

Yd = Myd * geary * (1/s);