%==============================================================================
% AAUCrane Models (Mx, My, X, Y, W)
%==============================================================================
clear all; close all;
s = tf('s');

%------------------------------------------------------------------------------
% GLOBALS
%------------------------------------------------------------------------------
mt = 0.3; % Kan ikke vejes / el. findes i dokumentation
mm = 0.8; % Magnet + krog
mp = 2.866 + mm; % Container
l  = 0.65;
g  = 9.82;
kt = 0.03;
ra = 0.43;

%------------------------------------------------------------------------------
% MED CONTAINER
% Mx(s): Motor X (Uin,x [V] -> Omega [rad/s])
%------------------------------------------------------------------------------
Mxm.b = 0.0018;
Mxm.I = 0.0012;

Mxm = (kt/ra)/(kt^2/ra + Mxm.b + Mxm.I*s);

%------------------------------------------------------------------------------
% MED CONTAINER
% X(s): X pos (Omega [rad/s] -> X [m])
%------------------------------------------------------------------------------

Grx = 7/144;
rrx = 0.08;
gear = Grx*rrx;
Xm = Mxm * gear * 1/s;
%------------------------------------------------------------------------------
% UDEN CONTAINER
% Mx(s): Motor X (Uin,x [V] -> Omega [rad/s])
%------------------------------------------------------------------------------
Mxu.b = 0.0015;
Mxu.I = 0.0011;

Mxu = (kt/ra)/(kt^2/ra + Mxu.b + Mxu.I*s);

%------------------------------------------------------------------------------
% UDEN CONTAINER
% X(s): X pos (Omega [rad/s] -> X [m])
%------------------------------------------------------------------------------

Grx = 7/144;
rrx = 0.08;
gear = Grx*rrx;
Xu = Mxu * gear * 1/s;

%------------------------------------------------------------------------------
% MED CONTAINER
% W(s): Wire (X [m] -> Phi [rad])
%------------------------------------------------------------------------------
Wm.b = -0.0316;
Wm.I = -0.0890;

Wm = (-mp*l*s^2)/((Wm.I + mp*l^2)*s^2 - Wm.b*s + mp*g*l);
%------------------------------------------------------------------------------
% UDEN CONTAINER
% W(s): Wire (X [m] -> Phi [rad])
%------------------------------------------------------------------------------
Wu.b = -0.0125;
Wu.I = -0.0419;

Wu = (-mm*l*s^2)/((Wu.I + mm*l^2)*s^2 - Wu.b*s + mm*g*l);
%------------------------------------------------------------------------------
% My(s): Motor Y (Uin,y [V] -> Omega [rad/s])
%------------------------------------------------------------------------------
My.b = 0.0218;
My.I = 0.0078;

My = (kt/ra)/(kt^2/ra + My.b + My.I*s);

%------------------------------------------------------------------------------
% Y(s): Y pos (Omega [rad/s] -> Y [m])
%------------------------------------------------------------------------------
Gry = 1/24;
rry = 0.05;

Y = My * Gry * rry * 1/2 * 1/s;