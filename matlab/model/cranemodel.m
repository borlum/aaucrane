%==============================================================================
% AAUCrane Models (Mx, My, X, Y, W)
%==============================================================================
clear all; close all;
s = tf('s');

%------------------------------------------------------------------------------
% GLOBALS
%------------------------------------------------------------------------------
% Magnet + krog
mm = 1;
% Container + magnet + krog (Hele 'pendul' massen)
mp = 2.866 + mm;
% Længde af wire
l  = 0.65;
% Tyngdekraften
g  = 9.82;
% Tyngdekraften
kt = 0.03;
% Motor modstand
ra = 0.43;

CONTAINER = 1;
UP        = 1;

if CONTAINER == 1
    % MED CONTAINER
    Mx.b = 0.0018;
    Mx.I = 0.0012;
    W.b  = 0.0315;
    W.I  = 0.0890;
elseif CONTAINER == 0
    % UDEN CONTAINER
    Mx.b = 0.0015;
    Mx.I = 0.0011;
    W.b  = 0.0136;
    W.I  = 0.0423;
end

if UP == 1
    My.b = 0.0322;
    My.I = 0.0090;
else
    My.b = 0.0115;
    My.I = 0.0067;
end

B  = W.b;
Ip  = W.I;

%------------------------------------------------------------------------------
% Mx(s): Motor X (Uin,x [V] -> Omega [rad/s])
%------------------------------------------------------------------------------

Mx = (kt/ra)/(kt^2/ra + Mx.b + Mx.I*s);

%------------------------------------------------------------------------------
% Hx(s): X pos (Omega [rad/s] -> X [m])
%------------------------------------------------------------------------------
Grx = 7/144;
rrx = 0.08;
Hx = Mx * Grx * rrx * 1/s;

%------------------------------------------------------------------------------
% W(s): Wire (X [m] -> Phi [rad])
%------------------------------------------------------------------------------
W = (-mp*l*s^2)/((mp*l^2 - W.I)*s^2 + W.b*s + mp*g*l);

%------------------------------------------------------------------------------
% My(s): Motor Y (Uin,y [V] -> Omega [rad/s])
%------------------------------------------------------------------------------
My = (kt/ra)/(kt^2/ra + My.b + My.I*s);

%------------------------------------------------------------------------------
% Hy(s): Y pos (Omega [rad/s] -> Y [m])
%------------------------------------------------------------------------------
Gry = 1/24;
rry = 0.05;
Hy = My * Gry * rry * (1/s);

jp = 0.0890;
B = 0.0315;